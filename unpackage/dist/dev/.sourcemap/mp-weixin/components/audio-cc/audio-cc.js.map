{"version":3,"sources":["webpack:///D:/php-work/audio-cc/audio-cc/components/audio-cc/audio-cc.vue?8903","webpack:///D:/php-work/audio-cc/audio-cc/components/audio-cc/audio-cc.vue?de79","webpack:///D:/php-work/audio-cc/audio-cc/components/audio-cc/audio-cc.vue?26ca","webpack:///D:/php-work/audio-cc/audio-cc/components/audio-cc/audio-cc.vue?05de","uni-app:///components/audio-cc/audio-cc.vue","webpack:///D:/php-work/audio-cc/audio-cc/components/audio-cc/audio-cc.vue?5ccd"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACc;;;AAGrE;AACoL;AACpL,gBAAgB,2LAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACbA;AAAA;AAAA;AAAA;AAA0rB,CAAgB,wrBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;ACY9sB;AACA,wB;AACA;AACA,kBADA;AAEA;AACA;AACA;AACA;AACA,kBADA;AAEA,eAFA,EAFA;;AAMA;AACA;AACA,kBADA;AAEA,eAFA,EAPA;;AAWA;AACA;AACA,mBADA;AAEA,kBAFA,EAZA;;AAgBA;AACA;AACA,mBADA;AAEA,kBAFA,EAjBA;;AAqBA;AACA,kBADA;AAEA,0CAFA,EArBA;;AAyBA;AACA,kBADA;AAEA,0CAFA,EAzBA,EAHA;;;AAiCA,MAjCA,kBAiCA;AACA;AACA,aADA;AAEA,YAFA;AAGA,gBAHA;AAIA,iBAJA;AAKA,iBALA;AAMA,sDANA;AAOA,oBAPA;;AASA,GA3CA;AA4CA;AACA,SA7CA,qBA6CA;AACA;AACA;AACA,GAhDA;AAiDA;AACA,eAlDA,2BAkDA;AACA;AACA;AACA;AACA;AACA,GAvDA;AAwDA;AACA,QADA,gBACA,GADA,EACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA;AACA,KAZA;AAaA,QAbA,gBAaA,GAbA,EAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArBA;AAsBA,OAtBA,eAsBA,MAtBA,EAsBA,MAtBA,EAsBA;AACA;AACA;AACA;AACA,KA1BA,EAxDA;;AAoFA;AACA,cADA,wBACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAPA;AAQA,QARA,kBAQA;AACA;AACA;AACA,mCADA;AAEA,mCAFA;;AAIA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,OAdA,MAcA;AACA;AACA;AACA,KA1BA;AA2BA,QA3BA,kBA2BA;AACA;AACA,KA7BA;AA8BA,aA9BA,uBA8BA;AACA;AACA,KAhCA;AAiCA,iBAjCA,2BAiCA;AACA;AACA,KAnCA,EApFA;;AAyHA;AACA;AACA,aAFA,uBAEA;AACA;AACA;AACA,kBAFA;;AAIA;AACA;AACA,qDADA;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA,EAGA,GAHA;AAIA,OAPA;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OATA;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAHA,EAGA,GAHA;AAIA,SALA,MAKA;AACA;AACA;AACA,OAVA;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;;AAOA;AACA;AACA;;AAEA,OAHA;;AAKA;AACA;AACA;AACA;AACA,OAHA;;AAKA;AACA;AACA;AACA,0CADA;;AAGA;AACA,OALA;AAMA,KAnFA;AAoFA;AACA,aArFA,uBAqFA;AACA;AACA,KAvFA;AAwFA;AACA,cAzFA,wBAyFA;AACA;AACA,KA3FA;AA4FA;AACA,aA7FA,uBA6FA;AACA;AACA,KA/FA;AAgGA;AACA,QAjGA,gBAiGA,KAjGA,EAiGA;AACA;AACA,KAnGA;AAoGA;AACA,eArGA,uBAqGA,KArGA,EAqGA;AACA;AACA;AACA;AACA,OAHA,EAGA,GAHA;AAIA,KA1GA;AA2GA;AACA,gBA5GA,wBA4GA,CA5GA,EA4GA;AACA;AACA;AACA,KA/GA;AAgHA;AACA,kBAjHA,0BAiHA,CAjHA,EAiHA;AACA;AACA,KAnHA;AAoHA;AACA,cArHA,wBAqHA;AACA;;AAEA;AACA;AACA;;AAEA,kBAPA,CAOA;AACA,qDARA,CAQA;AACA;;AAEA;AACA,KAjIA,EAzHA,E;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAmwC,CAAgB,0rCAAG,EAAC,C","file":"components/audio-cc/audio-cc.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./audio-cc.vue?vue&type=template&id=27e45038&\"\nvar renderjs\nimport script from \"./audio-cc.vue?vue&type=script&lang=js&\"\nexport * from \"./audio-cc.vue?vue&type=script&lang=js&\"\nimport style0 from \"./audio-cc.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/audio-cc/audio-cc.vue\"\nexport default component.exports","export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./audio-cc.vue?vue&type=template&id=27e45038&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.play = !_vm.play\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./audio-cc.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./audio-cc.vue?vue&type=script&lang=js&\"","<template>\n  <view class=\"audio-cc\">\n    <view class=\"info-box\">\n      <view class=\"title\">{{ title }}</view>\n      <view v-if=\"show\" class=\"time\">{{ time }}</view>\n    </view>\n    <img class=\"play-btn\" @click=\"play=!play\" mode=\"widthFix\" :src=\"currentImg\">\n\n    <slider class=\"audio-slider\" activeColor=\"#FFCE00\" backgroundColor=\"#E8E8E8\" block-color=\"#FFCE00\" block-size=\"12\" v-if=\"show\" :max=\"sliderMax\" :value=\"sliderCurrent\" @change=\"sliderChange\" @changing=\"sliderChanging\"/>\n  </view>\n</template>\n<script>\n//GEP默认音频播放组件模块\nconst audioContainer = {};\nexport default {\n  name:\"audio-cc\",\n  // 此处定义传入的数据\n  props: {\n    //音频地址\n    src: {\n      type: String,\n      value: ''\n    },\n    //标题\n    title: {\n      type: String,\n      value: ''\n    },\n    //是否自动播放\n    autoplay: {\n      type: Boolean,\n      value: false\n    },\n    //是否循环播放\n    loop: {\n      type: Boolean,\n      value: false\n    },\n    playImg:{\n      type: String,\n      value: '../../static/audio-play.png'\n    },\n    pauseImg:{\n      type: String,\n      value: '../../static/audio-stop.png'\n    }\n  },\n  data() {\n    return {\n      uuid: 0,\n      max: 0,\n      current: 0,\n      play: false,\n      stop: false,\n      innerAudioContext: uni.createInnerAudioContext(),\n      accuracy: 3000\n    };\n  },\n  //在实例创建完成后被立即调用。\n  mounted() {\n    this.createUuid();\n    this.audioInit();\n  },\n  //实例销毁之前调用。在这一步，实例仍然完全可用。\n  beforeDestroy(){\n    console.info('实例销毁;播放状态切换：停止');\n    this.innerAudioContext.stop();\n    this.innerAudioContext.destroy();\n    audioContainer[this.uuid] = null;\n  },\n  watch:{\n    play(val){\n      console.info(`play: ${val}`);\n      if (this.src.length > 0) {\n        if (val) {\n          console.info(`uuid：${this.uuid};播放状态切换：播放`);\n          this.innerAudioContext.play();\n        } else {\n          console.info(`uuid：${this.uuid};播放状态切换：暂停`);\n          this.innerAudioContext.pause();\n        }\n      }\n    },\n    stop(val){\n      if (val){\n        console.info(`uuid：${this.uuid};播放状态切换：停止`);\n        this.current = 0;\n        this.innerAudioContext.stop();\n        this.play = false;\n        this.stop = false;\n      }\n    },\n    src(newVal, oldVal){\n      if (newVal !== oldVal) {\n        this.audioInit();\n      }\n    }\n  },\n  computed:{\n    currentImg(){\n      if (this.play) {\n        return this.pauseImg;\n      } else {\r\n\t\treturn this.playImg;\n      }\n    },\n    time(){\n      if (this.max > 0) {\n        let end = this.max - this.current,\n            minute = parseInt(end / 60),\n            second = parseInt(end % 60);\n\n        if (minute < 10) {\n          minute = `0${minute}`;\n        }\n\n        if (second < 10) {\n          second = `0${second}`;\n        }\n\n        return `${minute}:${second}`;\n      } else {\n        return '00:00';\n      }\n    },\n    show(){\n      return this.max > 0;\n    },\n    sliderMax(){\n      return this.max > 0 ? parseInt(this.max * this.accuracy) : 0;\n    },\n    sliderCurrent(){\n      return this.current > 0 ? parseInt(this.current * this.accuracy) : 0;\n    }\n  },\n  methods:{\n    //音频初始化\n    audioInit() {\n      let _self = this,\n          //是否单独播放\n          alone = true;\n\n      if (this.src.length > 0) {\n        let time = parseInt(Date.parse(new Date()) / (1000 * 60 * 30)),\n            src = `${this.src}?v=${time}`;\n\n        console.info(`uuid：${this.uuid}`);\n        console.info(`加载音频地址：${src}`);\n\n        _self.innerAudioContext.src = src;\n        _self.innerAudioContext.autoplay = _self.autoplay;\n        _self.innerAudioContext.loop = _self.loop;\n\n        audioContainer[_self.uuid] = _self.innerAudioContext;\n      }\n\n      //初始化加载事件\n      this.innerAudioContext.onCanplay(() => {\n        console.info('初始化加载事件');\n        _self.innerAudioContext.duration;\n        setTimeout(function (){\n          _self.max = _self.innerAudioContext.duration;\n          console.info(`max: ${_self.max};src: ${_self.innerAudioContext.src}`);\n        }, 500)\n      });\n\n      //开始播放事件\n      this.innerAudioContext.onPlay(() => {\n        console.info('开始播放', `是否单独播放${alone}`);\n        if (alone) {\n          for (let uuid in audioContainer){\n            if (this.uuid !== uuid) {\n              typeof audioContainer[uuid] === \"object\" && audioContainer[uuid].pause();\n            }\n          }\n        }\n      });\n\n      //音频播放进度更新事件\n      this.innerAudioContext.onTimeUpdate(() => {\n        console.info(`当前播放进度: ${_self.innerAudioContext.currentTime}`);\n        if (this.max <= 0) {\n          setTimeout(function (){\n            _self.max = _self.innerAudioContext.duration;\n            console.info(`max: ${_self.max};src: ${_self.innerAudioContext.src}`);\n          }, 200)\n        } else {\n          _self.current = _self.innerAudioContext.currentTime;\n        }\n      });\n\n      //音频暂停事件\n      this.innerAudioContext.onPause((e) => {\n        console.info(`播放暂停`, e);\n        if (_self.play) {\n          _self.pauseAudio();\n        }\n      });\n\n      //音频停止事件\n      this.innerAudioContext.onStop((e) => {\n        console.info(`播放停止`, e);\n\n      });\n\n      //音频自然播放结束事件\n      this.innerAudioContext.onEnded((e) => {\n        console.info(`播放结束`, e);\n        _self.stopAudio();\n      });\n\n      //异常监听\n      this.innerAudioContext.onError((res) => {\n        uni.showToast({\n          title: res.errMsg || \"网络故障请稍后重试\"\n        });\n        console.info(res.errMsg, res.errCode);\n      });\n    },\n    //播放\n    playAudio(){\n      this.play = true;\n    },\n    //暂停\n    pauseAudio(){\n      this.play = false;\n    },\n    //停止\n    stopAudio(){\n      this.stop = true;\n    },\n    //快进到指定位置\n    seek(index){\n      this.innerAudioContext.seek(index / this.accuracy);\n    },\n    //快进到指定位置,并播放\n    seekAndPlay(index){\n      setTimeout(() =>{\n        this.seek(index);\n        this.playAudio();\n      }, 200);\n    },\n    //进度改变\n    sliderChange(e) {\n      this.pauseAudio();\n      this.seekAndPlay(e.detail.value);\n    },\n    //进度连续改变\n    sliderChanging(e){\n      this.pauseAudio();\n    },\n    //创建唯一uuid\n    createUuid() {\n      let s = [], hexDigits = '0123456789abcdef', i;\n\n      for (i = 0; i < 36; i++) {\n        s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);\n      }\n\n      s[14] = '4'; // bits 12-15 of the time_hi_and_version field to 0010\n      s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01\n      s[8] = s[13] = s[18] = s[23] = '-';\n\n      this.uuid = s.join('');\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.audio-cc{\n  width: 630rpx;\n  height: 130rpx;\n  background: #F9F9F9;\n  border-radius: 16rpx;\n  position: relative;\n\n  .info-box{\n    width: 100%;\n    padding: 20rpx 30rpx;\n\n    .title{\n      height: 40rpx;\n      font-size: 28rpx;\n      font-family: PingFangSC-Regular, PingFang SC;\n      font-weight: 400;\n      color: #262626;\n      line-height: 40rpx;\n    }\n\n    .time{\n      height: 34rpx;\n      font-size: 24rpx;\n      font-family: PingFang-SC-Light, PingFang-SC;\n      font-weight: 300;\n      color: #262626;\n      line-height: 34rpx;\n    }\n  }\n\n  .play-btn{\n    position: absolute;\n    width: 80rpx;\n    height: 80rpx;\n    right: 30rpx;\n    top: 20rpx;\n  }\n\n  .audio-slider{\n    position: absolute;\n    width: 555rpx;\n    left: 0;\n    right: 0;\n    bottom: -18rpx;\n  }\n}\n</style>\n","import mod from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./audio-cc.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./audio-cc.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}